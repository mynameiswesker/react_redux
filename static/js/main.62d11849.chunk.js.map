{"version":3,"sources":["actions/books.js","actions/cart.js","components/BookCard.js","containers/BookCard.js","actions/filter.js","components/Filter.js","containers/Filter.js","components/Menu.js","containers/Menu.js","components/App.js","containers/App.js","reducers/books.js","reducers/cart.js","reducers/filter.js","reducers/index.js","index.js","store.js"],"names":["setBooks","books","type","payload","addToCart","obj","removeFromCart","id","BookCard","book","title","author","price","image","addedCount","Card","className","Image","src","Content","Header","Meta","extra","Icon","name","Button","onClick","bind","connect","cart","items","reduce","count","dispatch","bindActionCreators","cartActions","setFilter","filter","setSearchQuery","value","Filter","filterBy","searchQuery","Menu","secondary","Item","active","Input","icon","onChange","e","target","placeholder","filterActions","CartComponent","List","selection","divided","verticalAlign","floated","color","avatar","MenuComponent","totalPrice","position","Popup","trigger","content","map","on","hideOnScroll","total","length","uniqBy","o","App","this","props","a","fetch","response","json","data","far","isReady","Container","Group","itemsPerRow","i","key","Component","searchBooks","orderBy","sortBy","toLowerCase","indexOf","filterBooks","booksActions","initialState","combineReducers","state","action","store","createStore","rootReducer","applyMiddleware","logger","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.62d11849.chunk.js","sourcesContent":["export const setBooks = books => ({\n  type: 'SET_BOOKS',\n  payload: books\n});\n","export const addToCart = obj => ({\n  type: 'ADD_TO_CART',\n  payload: obj,\n});\n\nexport const removeFromCart = id => ({\n  type: 'REMOVE_FROM_CART',\n  payload: id,\n});\n","import React from 'react';\nimport { Card, Image, Icon, Button } from 'semantic-ui-react';\n\nconst BookCard = book => {\n  const { title, author, price, image, addToCart, addedCount } = book;\n  return (\n    <Card>\n      <div className=\"card-image\">\n        <Image src={image}/>\n      </div>\n      <Card.Content>\n        <Card.Header>{title}</Card.Header>\n        <Card.Meta>\n          <span className=\"date\">{author}</span>\n        </Card.Meta>\n      </Card.Content>\n      <Card.Content extra>\n        <a>\n          <Icon name=\"rub\" />\n          {price}\n        </a>\n      </Card.Content>\n      <Button onClick={addToCart.bind(this, book)}>\n        Добавить в корзину {addedCount > 0 && `(${addedCount})`}\n      </Button>\n    </Card>\n  );\n};\n\nexport default BookCard;\n","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as cartActions from '../actions/cart';\nimport BookCard from '../components/BookCard';\n\nconst mapStateToProps = ({ cart }, { id }) => ({\n  addedCount: cart.items.reduce((count, book) => count + (book.id === id ? 1 : 0), 0),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  ...bindActionCreators(cartActions, dispatch),\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(BookCard);\n","export const setFilter = filter => ({\n  type: 'SET_FILTER',\n  payload: filter,\n});\n\nexport const setSearchQuery = value => ({\n  type: 'SET_QUERY',\n  payload: value,\n});\n","import React from 'react';\nimport { Input, Menu } from 'semantic-ui-react';\n\nconst Filter = ({ setFilter, filterBy, searchQuery, setSearchQuery }) => (\n  <Menu secondary>\n    <Menu.Item\n      active={filterBy === 'all'}\n      onClick={setFilter.bind(this, 'all')}>\n      Все\n    </Menu.Item>\n    <Menu.Item\n      active={filterBy === 'price_high'}\n      onClick={setFilter.bind(this, 'price_high')}>\n      Цена (дорогие)\n    </Menu.Item>\n    <Menu.Item\n      active={filterBy === 'price_low'}\n      onClick={setFilter.bind(this, 'price_low')}>\n      Цена (дешевые)\n    </Menu.Item>\n    <Menu.Item\n      active={filterBy === 'author'}\n      onClick={setFilter.bind(this, 'author')}>\n      Автор\n    </Menu.Item>\n    <Menu.Item>\n      <Input\n        icon=\"search\"\n        onChange={e => setSearchQuery(e.target.value)}\n        value={searchQuery}\n        placeholder=\"Введите запрос...\"\n      />\n    </Menu.Item>\n  </Menu>\n);\n\nexport default Filter;\n","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as filterActions from '../actions/filter';\nimport Filter from '../components/Filter';\n\nconst mapStateToProps = ({ books, filter }) => ({\n  filterBy: filter.filterBy,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  ...bindActionCreators(filterActions, dispatch),\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Filter);\n","import React from \"react\";\nimport { Menu, Popup, List, Button, Image } from \"semantic-ui-react\";\n\nconst CartComponent = ({ title, id, image, removeFromCart }) => (\n  <List selection divided verticalAlign=\"middle\">\n    <List.Item>\n      <List.Content floated=\"right\">\n        <Button onClick={removeFromCart.bind(this, id)} color=\"red\">\n          Удалить\n        </Button>\n      </List.Content>\n      <Image avatar src={image} />\n      <List.Content>{title}</List.Content>\n    </List.Item>\n  </List>\n);\n\nconst MenuComponent = ({ totalPrice, count, items }) => (\n  <Menu>\n    <Menu.Item name=\"browse\">Магазин книг</Menu.Item>\n\n    <Menu.Menu position=\"right\">\n      <Menu.Item name=\"signup\">\n        Итого: &nbsp; <b>{totalPrice}</b>&nbsp;руб.\n      </Menu.Item>\n\n      <Popup\n        trigger={\n          <Menu.Item name=\"help\">\n            Корзина (<b>{count}</b>)\n          </Menu.Item>\n        }\n        content={items.map(book => (\n          <CartComponent {...book} />\n        ))}\n        on=\"click\"\n        hideOnScroll\n      />\n    </Menu.Menu>\n  </Menu>\n);\n\nexport default MenuComponent;\n","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as cartActions from '../actions/cart';\nimport Menu from '../components/Menu';\nimport uniqBy from 'lodash/uniqBy';\n\nconst mapStateToProps = ({ cart }) => ({\n  totalPrice: cart.items.reduce((total, book) => total + book.price, 0),\n  count: cart.items.length,\n  items: uniqBy(cart.items, o => o.id),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  ...bindActionCreators(cartActions, dispatch),\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Menu);\n","import React, { Component } from 'react';\nimport { Card, Container } from 'semantic-ui-react';\nimport BookCard from '../containers/BookCard';\nimport Filter from '../containers/Filter';\nimport Menu from '../containers/Menu';\n\nclass App extends Component {\n  componentWillMount() {\n    const { setBooks } = this.props;\n\n    async function far() {\n      let url = \"books.json\";\n      let response = await fetch(url);\n\n      let data = await response.json(); // читаем ответ в формате JSON\n\n      setBooks(data);\n\n    }\n    far();\n  }\n\n  render() {\n    const { books, isReady } = this.props;\n    return (\n      <Container>\n        <Menu />\n        <Filter />\n        <Card.Group itemsPerRow={4}>\n          {!isReady\n            ? 'Загрузка...'\n            : books.map((book, i) => <BookCard key={i} {...book} />)}\n        </Card.Group>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as booksActions from '../actions/books';\nimport App from '../components/App';\nimport orderBy from 'lodash/orderBy';\n\nconst sortBy = (books, filterBy) => {\n  switch (filterBy) {\n    case 'price_high':\n      return orderBy(books, 'price', 'desc');\n    case 'price_low':\n      return orderBy(books, 'price', 'asc');\n    case 'author':\n      return orderBy(books, 'author', 'asc');\n    default:\n      return books;\n  }\n};\n\nconst filterBooks = (books, searchQuery) =>\n  books.filter(\n    o =>\n      o.title.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0 ||\n      o.author.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0,\n  );\n\nconst searchBooks = (books, filterBy, searchQuery) => {\n  return sortBy(filterBooks(books, searchQuery), filterBy);\n};\n\nconst mapStateToProps = ({ books, filter }) => ({\n  books: books.items && searchBooks(books.items, filter.filterBy, filter.searchQuery),\n  isReady: books.isReady,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  ...bindActionCreators(booksActions, dispatch),\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(App);\n","const initialState = {\n  isReady: false,\n  items: null\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_BOOKS\":\n      return {\n        ...state,\n        items: action.payload,\n        isReady: true\n      };\n    case \"SET_IS_READY\":\n      return {\n        ...state,\n        isReady: action.payload\n      };\n    default:\n      return state;\n  }\n};\n","const initialState = {\n  items: []\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case \"ADD_TO_CART\":\n      return {\n        ...state,\n        items: [...state.items, action.payload]\n      };\n    case \"REMOVE_FROM_CART\":\n      return {\n        ...state,\n        items: state.items.filter(o => o.id !== action.payload)\n      };\n    default:\n      return state;\n  }\n};\n","const initialState = {\n  searchQuery: '',\n  filterBy: 'all',\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case 'SET_QUERY':\n      return {\n        ...state,\n        searchQuery: action.payload,\n      };\n    case 'SET_FILTER':\n      return {\n        ...state,\n        filterBy: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from 'redux';\n\nimport books from './books';\nimport cart from './cart';\nimport filter from './filter';\n\nexport default combineReducers({\n  books,\n  cart,\n  filter,\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport 'semantic-ui-css/semantic.min.css';\nimport './app.css';\n\nimport App from './containers/App';\n\nimport createStore from './store';\nconst store = createStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n","import { createStore, applyMiddleware } from 'redux';\nimport logger from 'redux-logger';\n\nimport rootReducer from './reducers';\n\nexport default () => {\n  const store = createStore(rootReducer, applyMiddleware(logger));\n  return store;\n};\n"],"sourceRoot":""}